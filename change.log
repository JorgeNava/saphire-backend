# Changelog

## [0.0.3] ‚Äì 2025-05-29

### üõ†Ô∏è Infraestructura y despliegue
- **variables.tf**  
  - A√±adidas variables para todas las tablas de DynamoDB (`aws_dynamodb_table_messages`, `aws_dynamodb_table_tags`, etc.), buckets S3 (`aws_s3_message_attachments_bucket`, `aws_s3_notes_attachments_bucket`), OpenAI (`openai_api_base_url`, `openai_api_key_aws_use`) y flag de borrado de audio (`app_feature_flag_delete_audio_after_transcribe`).
- **locals.tf**  
  - Introducido `local.prefix` derivado de `var.table_prefix`, para unificar el prefijo de nombres en recursos y Lambdas.
- **lambdas.tf**  
  - Bloque `environment.variables` actualizado en cada `aws_lambda_function` para inyectar todas las claves necesarias en `process.env`.
- **.github/workflows/deploy.yml**  
  - Nuevo paso ‚ÄúGenerate terraform.tfvars‚Äù que extrae los valores de los GitHub Secrets y genera un archivo `terraform.tfvars` antes de `terraform init`.
  - Garantiza que Terraform reciba desde Actions los mismos valores que el `.env` local.

### üìñ Documentaci√≥n
- **README.md**  
  - Se actualiza la secci√≥n **Variables de entorno (app + Lambdas)** para reflejar los nuevos nombres y agrupaciones.
  - Se extiende **‚ÄúEn GitHub Secrets‚Äù** con instrucciones paso a paso para reproducir el `.env` en los Secrets del repositorio.
- **Changelog**  
  - Se a√±ade la entrada para la versi√≥n 0.0.3.

### üîÑ Renombrados y ajustes menores
- Se armonizaron nombres de variables entre `.env`, Terraform y c√≥digo (`OPENAI_API_BASE_URL`, `DELETE_AUDIO_AFTER_TRANSCRIBE`, etc.).
- Correcci√≥n de rutas y nombres en el bucle de empaquetado de Lambdas para usar `local.prefix`.  

---

## [0.0.2] ‚Äì 2025-05-29

### ‚ú® A√±adido
- Nueva Lambda **`createMessage`** (`POST /messages`): unifica el guardado y clasificaci√≥n de mensajes de texto con generaci√≥n autom√°tica de `messageId`, `timestamp`, `createdAt/updatedAt`, `tagIds` (IA/manual) y campos de auditor√≠a (`createdBy`, `lastModifiedBy`).  
- Lambda **`createMessageFromAudio`** (`POST /messages/audio`): transcribe audio (Whisper), clasifica contenido, asigna etiquetas IA/manual, genera IDs y timestamps, y elimina el audio de S3 si `DELETE_AUDIO_AFTER_TRANSCRIBE=true`.  
- CRUD completo para **Notes**:  
  - `createNote`  
  - `getNotes`  
  - `getNote`  
  - `updateNote`  
  - `deleteNote`  
- CRUD completo para **Tags**:  
  - `createTag`  
  - `getTags`  
  - `getTag`  
  - `updateTag`  
  - `deleteTag`  
- CRUD completo para **Thoughts** con IA de etiquetas:  
  - `createThought`  
  - `getThoughts`  
  - `getThought`  
  - `updateThought`  
  - `deleteThought`  
- Gesti√≥n avanzada de **Lists**:  
  - `createList`, `getLists`, `getList`, `updateList`, `deleteList`  
  - Sub-recursos para √≠tems: `addItemToList`, `replaceListItems`, `deleteListItem`  
- Lambda **`messageIntentIdentification`** (esqueleto en README) para detectar autom√°ticamente si un mensaje debe generar un ‚Äúthought‚Äù o invocar otras acciones.

### üîÑ Renombrado
- **`generateUploadUrl`** ‚Üí **`agenerateMessageAudioUploadUrl`** (`GET /messages/upload-url`)  
- **`saveAudioMessage`** ‚Üí **`createMessageFromAudio`** (`POST /messages/audio`)

### üìù Documentaci√≥n y configuraci√≥n
- Actualizaci√≥n de **README.md**:  
  - Endpoints unificados bajo `/messages`  
  - Estructura de repositorio y Terraform reflejada con los nuevos lambdas  
  - Ejemplos de CURL y Postman Collection ajustada  
- Renovaci√≥n de la secci√≥n de **Variables de entorno** y **GitHub Secrets** seg√∫n el nuevo `.env`

## [0.0.1] ‚Äì 2025-05-28
- Versi√≥n inicial con lambdas b√°sicas de texto y audio (`saveTextMessage`, `generateUploadUrl`, `saveAudioMessage`) y CRUD inicial para lists.  
